{% extends 'home.html' %}

{% block content %}
{% from "_macro.html" import render_field %}
<script>
	function impiar(){
		document.articulos.cantidad.value="";
	};
</script>

	<br>
	<br>
	<div class="container">
		<div class="row align-items-start align-self-center">
			<form  method="POST" name="articulos">
				<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
				<div class="form-inline form-group align-items-center">
					{{ render_field(form.fecha, class='form-control mx-sm-3', placeholder="DD/MM/YYYY HH:mm:seg  24Hrs") }}
                	<p class="help-block text-danger"></p>
                	{{ render_field(form.subtotal, class='form-control mx-sm-3', placeholder="SubTotal de la Factura") }}
                	<p class="help-block text-danger"></p>
                </div>
                <div class="form-inline form-group align-items-center">
                	{{ render_field(form.iva, class='form-control mx-sm-3', placeholder="IVA de la Factura") }}
                	<p class="help-block text-danger"></p>
                	{{ render_field(form.total, class='form-control mx-sm-3', placeholder="Total de la Factura") }}
                	<p class="help-block text-danger"></p>              
				</div>
				<div class="form-inline form-group align-items-center">
                	{{ render_field(form.rfc, class='form-control mx-sm-3', placeholder="(XXXx-aammdd-XXX)") }}
                	<p class="help-block text-danger"></p>
                	{{ render_field(form.nombre, class='form-control mx-sm-3', placeholder="Raz√≥n Social") }}
                	<p class="help-block text-danger"></p>              
				</div>
				<div class="form-inline form-group align-items-center">
                	{{ render_field(form.uuid, class='form-control mx-lg-3 flex',  placeholder="UUID de la Factura") }}
                	<p class="help-block text-danger"></p>
                	{{ render_field(form.placas, class='form-control mx-lg-3 flex',  placeholder="placas de la unidad") }}
                	<p class="help-block text-danger"></p>      
				</div>
				<div class="form-inline form-group align-items-center">
					{{ render_field(form.obser, class='form-control mx-lg-3 flex', rows="4", cols="50",  placeholder="Observaciones generales") }}
                	<p class="help-block text-danger"></p>    
				</div>
				{%if boton > 0 %}
					<div class="form-inline form-group align-items-center">
						<button type="submit" class="btn btn-outline-danger" id="guardar" name="guardar" value="guardar">Guardar</button>
					</div>
				{%endif%}
				<br>
					<table>
						<thead>
							<tr>
								<th scope="col">Cantidad</th>
								<th>Descripcion</th>
								<th>Precio Unitario</th>
								<th>Importe</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th scope="row">
									{{ form.cantidad }}
                					<p class="help-block text-danger"></p>
                				</th>
								<td>
									{{ form.descripcion}}
									<p class="help-block text-danger"></p>
								</td>
								<td>
									{{ form.pUnit }}
                					<p class="help-block text-danger"></p>
								</td>
								<td>
									{{ form.importe }}
                	                <p class="help-block text-danger"></p>   
								</td>
								<td>
									<button type="submit" class="btn btn-outline-primary d-flex align-items-center" id="agregar" name="agregar" value="agregar" onclick="limpiar();">Agregar Articulo</button>
								</td>
								<td><button type="reset" class="btn btn-outline-warning d-flex align-items-center" id="agregar" name="agregar" value="limpiar" >Limpiar campos</button></td>
							</tr>
						</tbody>
					</table>

                {% if articulos %}	
                	<div class="container">
                		<table class="table-bordered table-hover table-dark table-striped">
						<thead>
							<tr>
								<th scope="col">Cantidad</th>
								<th>Descripcion</th>
								<th>Precio Unitario</th>
								<th>Importe</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							{% for item in articulos %}
							<tr>
								<th scope="row">
									{{ item.cantidad}}
                				</th>
								<th scope="row">
									{{ item.descripcion}}
                				</th>
                				<th scope="row">
									{{ item.pUnit}}
                				</th>
                				<th scope="row">
									{{ item.importe}}
                				</th>
                				<th><button type="submit" class="btn btn-outline-primary d-flex align-items-center" id="eliminar" name="eliminar" value="{{item.id}}">Eliminar Articulo</button></th>
							</tr>
							{%endfor%}
						</tbody>
						</table>
                	</div>
                {% endif %}		  
			</form>
			
		</div>
		<br>
		<br>
	</div>
	<br>
	<br>
{% endblock %}